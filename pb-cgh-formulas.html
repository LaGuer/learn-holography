<!DOCTYPE html>
<html>
<head>
	<title>PH CGH formulas | Learning Holography</title>
	<link href="css/base-style.css" rel="stylesheet">
	<meta charset="utf-8">
	<script type="text/x-mathjax-config">
	  MathJax.Hub.Config({
		tex2jax: { inlineMath: [['$','$'],['\\(','\\)']] }
	  });
	</script>
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!--    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>-->
  </head>
  <body>
<h2>Step-by-step derivation of the physically-based computer-generated hologram formula</h2>

<p>So, we have a 3D object which we want a hologram of.
To do that, we first decompose the object into a large number of points,
which we approximate as spherical light sources
(for now we ignore the opacity of the object,
which would make the front points to block the light from the back ones
from reaching the holographic plate).</p>
<img src="img/stanford-bunny.png" width="240px" style="vertical-align:middle;">
<b style="font-size:x-large">➔</b>
<img src="img/stanford-bunny-points.png" width="220px" style="vertical-align:middle;">

<p>To make the hologram, we also need a reference wave,
which will act as the "key" to decode the interference pattern that we will generate.
The reference wave is a plane wave, i.e. it can be thought of
as a series of parallel planes spread apart by the wavelength $\lambda$,
each corresponding to a crest in the wave.</p>
<p style="text-align:center"><img src="img/plane-wave.svg" width="400"></p>

<p>Our system of coordinates will be the
<a href="http://en.wikipedia.org/wiki/Cartesian_coordinate_system#Orientation_and_handedness">left-handed cartesian</a>,
with X pointing to the right, Y pointing up, and Z pointing forward (from the object to the hologram).
The hologram will be a plane centered at the origin of the system of coordinates,
and perpendicular to the Z axis (i.e., it will be the XY plane).</p>
</p>
Given the above, we'll define the following elements for our calculations:
<ul>
	<li>$h = (h_x, h_y, 0)$, a point on the hologram plane ($z = 0$),</li>
	<li>$p_n = (p_{nx}, p_{ny}, p_{nz})$, the location of the $n^{th}$ object point light source</li>
</ul>

<p style="text-align:center"><img src="img/scene.svg" width="500"></p>

To start, we know that the value of a single wave at the origin of the coordinate system at instant $t$ is
\begin{equation}
A \times \cos(\omega t - \varphi)
\end{equation}

<p>...where $A$ is the amplitude (maximum height) of the wave,
$\omega$ is the temporal angular frequency of the wave
(i.e. how many cycles, in radians, the wave completes per unit of time)
and $\varphi$ is the initial phase (angle) of the wave at the origin.
So both $\omega t$ and $\varphi$ are angles, which are subtracted to yield
the real phase angle of the wave at instant $t$.</p>

<p>Using this formulation, the amplitude of the whole compound object wave,
made up of all $N$ object points,
at a given point $h$ of the hologram and a given time $t$,
is given by simply summing all contributions together:</p>

\begin{equation}
obj(h,t)=\sum_n^N A_n \cos(\omega t - \varphi_n)
\end{equation}

Here, $\varphi_n$ is the initial phase (at $t=0$)
of the spherical wave emitted from point $n$
at hologram point $h$.
It depends on the distance from the object point
to the hologram point being considered, which is calculated
using the familiar <a href="http://en.wikipedia.org/wiki/Euclidean_distance">
Euclidean distance</a> formula:

\begin{equation}
r_n(h) = \sqrt{(p_{nx} - h_x)^2 + (p_{ny} - h_y)^2 + p_{nz}^2}
\end{equation}

<p>(remember that $h_z$ is zero, because we placed the hologram plane at $z=0$).</p>

<p>This distance (called "r" to underline its meaning as the <em>radius</em>
of the light sphere emitted from the $n^{th}$ point)
is then multiplied by the angular spatial frequency of the wave
(i.e. how many cycles, in radians, the wave completes per unit of distance),
which is abbreviated as $k = \tau/\lambda$, and —somewhat unhelpfully—
called the "wavenumber". This multiplication, $k \times r_n(h)$,
like the $\omega \times t$ one, yields a phase angle, so both values can be
subtracted to yield the phase of the wave $p_n$ at point $h$ and instant $t$.</p>

<p>Note that here we're considering that the wave is leagving the object point
at phase zero, which is not true: because the object is not self-luminous,
but rather is reflecting the reference wave towards the hologram,
the initial phase at the object point will depend on its position
along the direction of propagation of the wave,
so the initial phase at the hologram point naturally depends on this as well.
Ideally we would subtract it, as in $k r_n(h) - \varphi_{n0}$.
However,
<span class="todo">(TODO: copy from google docs)</span>
</p>

The formula above then becomes:

\begin{equation}
obj(h,t)=\sum_n^N A_n \cos(\omega t - k r_n(h))
\end{equation}

Note how the duality of this generic formula can be exploited
to calculate both the variation of the object wavefront in space
(i.e. across the hologram), at a given instant frozen in time,
by varying $h$ and keeping $t$ constant,
and to calculate the variation of the object wavefront at a fixed
hologram point, by varying $t$ and keeping $h$ constant.

<h3>Adding the reference wave</h3>
<!-- Note: the R subscript for the reference wave
  -- is done using a small capital R, i.e. ʀ (U+0280),
  -- which plays better visually with the lowercase subscript of the object wave(s).
  -- Inserting the character directly in the source in HTML+MathJax works,
  -- but in pure latex, this would likely be done through the IPA package \usepackage{tipa}
  -- and the command \textscr. Not sure if it works in math mode, though.
  -->

<p>As may be noted, the above formula is just for the compound object wave.
We still need to add the reference wave
to get the complete wavefront that will form the hologram.</p>

<p>As we mentioned above, the reference wave is a planar wave
(<span class="todo">TODO: explain why</span>),
so it's formula can't be defined as based on the distance of its center,
like for the spherical point waves, because by definition, a planar wave
is a wave whose focal point is at an infinite distance, so the curvature
of its wavefronts is zero. What we do, instead, is define it
by the angles it makes with the hologram plane.</p>

<p>This is done using two angles: $\theta_y$, aka "yaw", which represents its rotation
around the (vertical) Y axis (like a head turning side to side),
and $\theta_x$, aka "pitch", which represents its rotation
around the (horizontal) X axis (like a head nodding up and down).<p>

<p>Let's start by considering $\theta_x=0$ and seeing what happens as we change $\theta_y$:</p>

<p style="text-align:center"><img src="img/plane-wave-projection.svg" width="400"></p>

<p>This image shows a top-down view of the scene,
assuming the reference wave only changes in "yaw",
so subsequent wavefronts, although planar, would be seen as parallel lines from the top.
As you can see, if we adjust the angle $\theta_y$,
although the wavelength $\lambda$ would remain the same,
the distance between two wave crests in the hologram plane would change.
In other words, it's the projection of $\lambda$ into the X axis.
We'll call this $\lambda_x$.</p>

<p>Using elementary trigonometry, we can see that,
using the definition of the sine of an angle
as <a href="http://en.wikipedia.org/wiki/Sohcahtoa#Mnemonics">opposite/hypotenuse</a>,
we obtain the relationship $\sin(\theta_y) = \lambda/\lambda_x$,
and therefore, $\lambda_x = \lambda/\sin(\theta_y)$.</p>

<p>Now, having the wavelength of the reference wave along the hologram plane,
we can, for every location $h_x$, obtain the value of the wave (i.e. its phase).
For example, assuming the wave's phase at $h_x=0$ is zero,
the wave will have completed a full cycle (thus the phase will be zero again)
at $h_x=\lambda_x$. So, to get the reference wave phase at any given $h_x$,
we just divide it by $\lambda_x$.</p>

<p>Of course, this gives us a fractional value,
a linearly growing value representing the number of cycles completed as we advance $h_x$.
To pass this value to the cosine function
and thus get the amplitude of the wave, we need to convert this to radians,
which we do by multiplying the fractional value by $\tau$.
The formula for a (yaw-only) reference wave is thus:</p>

\[
A_ʀ \cos ( \omega t - \frac{h_x}{\lambda_x} \tau )
\]

<p>The same reasoning can be made for the case where we vary $\theta_x$
and keep $\theta_y=0$ — we obtain $\lambda_y = \lambda / \sin(\theta_x)$.
So putting it all together, for the general case where both $\theta_x \neq 0$ and $\theta_y \neq 0$:</p>

\[
A_ʀ \cos \left[ \omega t - \left( \frac{h_x}{\lambda/\sin(\theta_y)} \tau + \frac{h_y}{\lambda/\sin(\theta_x)} \tau \right) \right]
\]

By rearranging the pieces, and because $k=\tau/\lambda$, this becomes:

\[
A_ʀ \cos \left[ \omega t - k \left( h_x \sin(\theta_y) + h_y \sin(\theta_x) \right) \right]
\]

To make this similar to the object wave function,
we can abstract away the inner sum that's multiplied by $k$
into a function $p$ (named that way to stress its meaning
as the <em>projection</em> of the reference wave into the hologram plane):

\[
p_ʀ(h) = \left( h_x \sin(\theta_y) + h_y \sin(\theta_x) \right)
\]

thus yielding the reference wave formula:

\begin{equation}
ref(h,t)=A_ʀ \cos ( \omega t - k p_ʀ(h) )
\end{equation}

<p></p>
<p></p>
<h3>Cummulative hologram</h3>

<h3>Complex formulation</h3>
\begin{equation}
obj(h) = \sum_i^N A_i \exp{(j k r_i(h))}
\end{equation}

where $A_i$ is the amplitude of the light source and  is the euclidean distance between $p_i$ and $h$.

Also let $A_{ref}$ be the amplitude of the planar reference wavefront, whose direction is given by the normalized vector $\mathbf{ref} = (ref_x, ref_y, ref_z), |\mathbf{ref}| = 1$. Then the reference wavefront at $h$ is given by

\begin{equation}
ref(h) = A_{ref} \exp \left[ j k (\mathbf{ref} \cdot h) \right] = A_{ref} \exp \left[ j k (ref_x h_x  + ref_y h_y ) \right]
\end{equation}

since $h_z = 0$. By modulating the object wavefront with the planar reference wavefront, the resulting field at each point $h$ of the hologram plane is given by

\[
E(h) = obj(h) + ref(h)
\]

The respective intensity pattern is given by the magnitude squared

\[
I(h) = |E(h)|^2 = E(h) * E(h)^*
\]
The bipolar intensity method can be derived by expanding the magnitude squared above
\begin{equation}
I(h) = |E(h)|^2 = |obj(h)|^2 + |ref(h)|^2 + 2 Real[obj(h) * ref^*(h)]
\end{equation}
The $|obj(h)|^2$ term represents object point light sources interfering with each others and can be neglected in computer generated holography. The $|ref(h)|^2$ term is the reference bias that increases the hologram intensity and can also not be included. Finally, the last term contains all the required information to fully reconstruct the desired image. In the bipolar intensity formulation the interference pattern across points $h$ of the hologram plane is thus described by
\[ \begin{array}{lcl}
I(h) & \propto &  Real[obj(h) * ref^*(h)]\\
 & \propto & Real [ A_{ref} \exp[-j k (ref_x h_x + ref_y h_y)] \sum_i^N A_i \exp{(j k r_i(h))} ]\\
 & \propto & Real [ A_{ref} \sum_i^N A_i \exp{[j k ( r_i(h) - (ref_x h_x + ref_y h_y) )]} ]
\end{array} \]

which finally leads to

\begin{equation}
I(h) \propto A_{ref} \sum_i^N A_i \cos{[k ( r_i(h) -(ref_x h_x + ref_y h_y) )]}
\label{eq:bipolar}
\end{equation}

  </body>
</html>
